{% extends "layout.html" %}

{% block title %}Add Patient - CS50Medix{% endblock %}

{% block content %}
<h2>Add New Patient</h2>

<form action="{{ url_for('patients_bp.add_patient') }}" method="POST" class="form-sections">
  <!-- Essential Patient Information -->
  <fieldset>
    <legend>Basic Information</legend>

    <div>
      <label for="first_name">First Name <span class="required">*</span></label>
      <input type="text" name="first_name" id="first_name" required placeholder="John">
    </div>

    <div>
      <label for="last_name">Last Name <span class="required">*</span></label>
      <input type="text" name="last_name" id="last_name" required placeholder="Doe">
    </div>

    <div>
      <label>Date of Birth <span class="required">*</span></label>
      <div class="dob-selects">
        <select name="dob_day" required>
          <option value="">Day</option>
          {% for day in range(1, 32) %}
            <option value="{{ day }}">{{ day }}</option>
          {% endfor %}
        </select>
        <select name="dob_month" required>
          <option value="">Month</option>
          {% for month in range(1, 13) %}
            <option value="{{ month }}">{{ month }}</option>
          {% endfor %}
        </select>
        <select name="dob_year" required>
          <option value="">Year</option>
          {% for year in range(1900, 2026) %}
            <option value="{{ year }}">{{ year }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div>
      <label for="gender">Gender <span class="required">*</span></label>
      <select name="gender" id="gender" required>
        <option value="">--Select--</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Other">Other</option>
      </select>
    </div>
  </fieldset>

  <!-- Optional Patient Information -->
  <fieldset>
    <legend>Contact & Clinical Info</legend>

    <div>
      <label for="phone_number">Phone Number</label>
      <input type="tel" name="phone_number" id="phone_number" placeholder="(555) 123-4567">
    </div>

    <div>
      <label for="email">Email</label>
      <input type="email" name="email" id="email" placeholder="john@example.com">
    </div>

    <div>
      <label for="address">Address</label>
      <textarea name="address" id="address" placeholder="123 Main St, Springfield"></textarea>
    </div>

    <div>
      <label for="blood_type">Blood Type</label>
      <select name="blood_type" id="blood_type">
        <option value="">--Select--</option>
        {% for bt in ['A+', 'A-', 'B+', 'B-', 'AB+', 'AB-', 'O+', 'O-'] %}
          <option value="{{ bt }}">{{ bt }}</option>
        {% endfor %}
      </select>
    </div>

    <div>
      <label for="emergency_contact_name">Emergency Contact Name</label>
      <input type="text" name="emergency_contact_name" id="emergency_contact_name" placeholder="Jane Smith">
    </div>

    <div>
      <label for="emergency_contact_phone">Emergency Contact Phone</label>
      <input type="tel" name="emergency_contact_phone" id="emergency_contact_phone" placeholder="(555) 987-6543">
    </div>

    <div>
      <label for="insurance_provider">Insurance Provider</label>
      <input type="text" name="insurance_provider" id="insurance_provider">
    </div>

    <div>
      <label for="insurance_number">Insurance Number</label>
      <input type="text" name="insurance_number" id="insurance_number">
    </div>

    <div>
      <label for="notes">Notes</label>
      <textarea name="notes" id="notes" placeholder="Additional history or clinical notes"></textarea>
    </div>
  </fieldset>

  <div>
    <button type="submit">Add Patient</button>
  </div>
</form>

<!-- CSS Style -->
<style>
.form-sections {
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
  max-width: 700px;
}
form fieldset {
  border: 1px solid #ccc;
  padding: 1rem;
  border-radius: 6px;
}
form legend {
  font-weight: bold;
}
form div {
  display: flex;
  flex-direction: column;
}
form label {
  font-weight: 500;
  margin-bottom: 4px;
}
form input, form select, form textarea {
  padding: 8px;
  border-radius: 4px;
  border: 1px solid #ccc;
}
form button {
  padding: 10px;
  font-weight: bold;
  background: #1976d2;
  color: white;
  border: none;
  border-radius: 4px;
}
form button:hover {
  background: #1565c0;
}
.required {
  color: red;
}
.dob-selects {
  display: flex;
  gap: 5px;
}
</style>
{% endblock %}
