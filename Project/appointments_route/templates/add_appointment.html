{% extends "layout.html" %}

{% block title %}Schedule Appointment - CS50Medix{% endblock %}

{% block content %}
<h2>Schedule New Appointment</h2>

<form action="{{ url_for('appointments_bp.add_appointment') }}" method="POST">
    <!-- Patient Selector -->
    <div>
        <label for="patient_id">Patient <span class="required">*</span></label>
        <select name="patient_id" id="patient_id" required>
            <option value="">--Select Patient--</option>
            {% for p in patients %}
                <option value="{{ p.patient_id }}">
                    {{ p.first_name }} {{ p.last_name }}
                </option>
            {% endfor %}
        </select>
    </div>

    <!-- Doctor Selector -->
    <div>
        <label for="doctor_id">Doctor <span class="required">*</span></label>
        <select name="doctor_id" id="doctor_id" required>
            <option value="">--Select Doctor--</option>
            {% for d in doctors %}
                <option value="{{ d.doctor_id }}">
                    {{ d.first_name }} {{ d.last_name }}
                </option>
            {% endfor %}
        </select>
    </div>

    <!-- Date & Time Picker -->
    <div>
        <label for="appointment_datetime">Date &amp; Time <span class="required">*</span></label>
        <input
            type="datetime-local"
            name="appointment_datetime"
            id="appointment_datetime"
            required>
    </div>

    <!-- Reason -->
    <div>
        <label for="reason">Reason <span class="required">*</span></label>
        <textarea name="reason" id="reason" required></textarea>
    </div>

    <!-- Submit Button -->
    <div>
        <button type="submit">Schedule Appointment</button>
    </div>
</form>
{% endblock %}
